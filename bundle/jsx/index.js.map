{"version":3,"file":"index.js","sources":["../../packages/utils.js","../../packages/core-toggle/core-toggle.js","../../packages/core-toggle/core-toggle.jsx","../../packages/core-input/core-input.js","../../packages/core-input/core-input.jsx"],"sourcesContent":["export const IS_BROWSER = typeof window !== 'undefined'\nexport const IS_ANDROID = IS_BROWSER && /(android)/i.test(navigator.userAgent) // Bad, but needed\nexport const IS_IOS = IS_BROWSER && /iPad|iPhone|iPod/.test(String(navigator.platform))\n\n/**\n* addEvent\n* @param {String} uuid An unique ID of the event to bind - ensurnes single instance\n* @param {String} type The type of event to bind\n* @param {Function} handler The function to call on event\n*/\nexport function addEvent (uuid, type, handler) {\n  const useCaptureForOldFirefox = type === 'blur' || type === 'focus'\n  const id = `${uuid}-${type}`\n\n  if (typeof window === 'undefined' || window[id]) return                       // Ensure single instance\n  document.addEventListener(window[id] = type, handler, useCaptureForOldFirefox)\n}\n\nexport function ariaExpand (master, open) {\n  const relatedTarget = ariaTarget(master)\n  const prevState = master.getAttribute('aria-expanded') === 'true'\n  const wantState = typeof open === 'boolean' ? open : (open === 'toggle' ? !prevState : prevState)\n  const canUpdate = prevState === wantState || dispatchEvent(master, 'toggle', {relatedTarget, isOpen: prevState})\n  const nextState = canUpdate ? wantState : prevState\n\n  relatedTarget[nextState ? 'removeAttribute' : 'setAttribute']('hidden', '')   // Toggle hidden attribute\n  master.setAttribute('aria-expanded', nextState)                               // Set expand always\n  return nextState\n}\n\nexport function ariaTarget (master, relationType) {\n  const targetId = master.getAttribute('aria-controls') || master.getAttribute('aria-owns')\n  const target = document.getElementById(targetId) || master.nextElementSibling\n  const label = IS_ANDROID ? 'data' : 'aria'   // Andriod has a bug and reads only label instead of content\n\n  if (!target) throw new Error(`missing nextElementSibling on ${master.outerHTML}`)\n  if (relationType) {\n    master.setAttribute(`aria-${relationType}`, target.id = target.id || getUUID())\n    target.setAttribute(`${label}-labelledby`, master.id = master.id || getUUID())\n  }\n  return target\n}\n\n/**\n* escapeHTML\n* @param {String} str A string with potential html tokens\n* @return {String} Escaped HTML string according to OWASP recommendation\n*/\nconst ESCAPE_MAP = {'&': '&amp;', '<': '&lt;', '>': '&gt;', '\"': '&quot;', '/': '&#x2F;', '\\'': '&#x27;'}\nexport function escapeHTML (str) {\n  return String(str || '').replace(/[&<>\"'/]/g, (char) => ESCAPE_MAP[char])\n}\n\n/**\n* exclude\n* @param {Object} target The target object\n* @param {Object} exclude The source to exclude keys from\n* @return {Object} The target object without keys found in source\n*/\nexport function exclude (target, exclude) {\n  return Object.keys(target).reduce((acc, key) => {\n    if (!exclude.hasOwnProperty(key)) acc[key] = target[key]\n    return acc\n  }, {})\n}\n\n/**\n* dispatchEvent\n* @param {Element} elem The target object\n* @param {String} name The source object(s)\n* @param {Object} detail Detail object (bubbles and cancelable is set to true)\n* @return {Boolean} Whether the event was cance\n*/\nexport function dispatchEvent (elem, name, detail = {}) {\n  let event\n  if (typeof window.CustomEvent === 'function') {\n    event = new window.CustomEvent(name, {bubbles: true, cancelable: true, detail})\n  } else {\n    event = document.createEvent('CustomEvent')\n    event.initCustomEvent(name, true, true, detail)\n  }\n\n  return elem.dispatchEvent(event)\n}\n\n/**\n* getUUID\n* @return {String} A generated unique ID\n*/\nexport function getUUID (el, attr) {\n  return Date.now().toString(36) + Math.random().toString(36).slice(2, 5)\n}\n\n/**\n* queryAll\n* @param {String|NodeList|Array|Element} elements A CSS selector string, nodeList, element array, or single element\n* @return {Array} Array of elements\n*/\nexport function queryAll (elements, context = document) {\n  if (elements.nodeType) return [elements]\n  if (typeof elements === 'string') return [].slice.call(context.querySelectorAll(elements))\n  if (elements.length) return [].slice.call(elements)\n  return []\n}\n","import {name, version} from './package.json'\nimport {addEvent, ariaExpand, ariaTarget, queryAll} from '../utils'\n\nconst UUID = `data-${name}-${version}`.replace(/\\W+/g, '-')         // Strip invalid attribute characters\nconst OPEN = 'aria-expanded'\nconst POPS = 'aria-haspopup'\n\nexport default function toggle (selector, open) {\n  const options = typeof open === 'object' ? open : {open}\n  const setOpen = typeof options.open === 'boolean'\n  const setPops = typeof options.popup === 'boolean'\n\n  return queryAll(selector).forEach((button) => {\n    const open = setOpen ? options.open : button.getAttribute(OPEN) === 'true'\n    const pops = setPops ? options.popup : button.getAttribute(POPS) === 'true'\n\n    button.setAttribute(UUID, '')\n    button.setAttribute(POPS, pops)\n\n    ariaTarget(button, 'controls')\n    ariaExpand(button, open)\n    return button\n  })\n}\n\naddEvent(UUID, 'click', ({target}) => {\n  queryAll(`[${UUID}]`).forEach((el) => {\n    const open = el.getAttribute(OPEN) === 'true'\n    const pops = el.getAttribute(POPS) === 'true'\n\n    if (el.contains(target)) toggle(el, !open)                  // Click on toggle\n    else if (pops) toggle(el, ariaTarget(el).contains(target))  // Click in target or outside\n  })\n})\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport coreToggle from '../core-toggle/core-toggle'\nimport {exclude} from '../utils'\n\nconst DEFAULTS = {open: null, popup: null}\n\nfunction mountToggle (self) {\n  coreToggle(ReactDOM.findDOMNode(self).firstElementChild)      // Button must be first child\n}\n\nexport default class Toggle extends React.Component {\n  componentDidMount () { mountToggle(this) }                    // Mount client side only to avoid rerender\n  componentDidUpdate () { mountToggle(this) }                   // Must mount also on update in case content changes\n  render () {\n    return React.createElement('div', exclude(this.props, DEFAULTS),\n      React.Children.map(this.props.children, (child, adjacent) => {\n        return React.cloneElement(child, adjacent ?\n          {'hidden': !this.props.open} :\n          {\n            'aria-expanded': String(Boolean(this.props.open)),\n            'aria-haspopup': String(Boolean(this.props.popup))\n          })\n      })\n    )\n  }\n}\n","import {name, version} from './package.json'\nimport {IS_IOS, addEvent, escapeHTML, dispatchEvent, queryAll} from '../utils'\n\nconst UUID = `data-${name}-${version}`.replace(/\\W+/g, '-') // Strip invalid attribute characters\nconst KEYS = {ENTER: 13, SHIFT: 16, ESC: 27, PAGEUP: 33, PAGEDOWN: 34, END: 35, HOME: 36, UP: 38, DOWN: 40}\nconst ROLE = IS_IOS ? 'data-role' : 'role'                  // iOS does not inform user area is editable if combobox\nconst ITEM = '[tabindex=\"-1\"]'\n\nexport default function input (elements, items) {\n  const options = typeof items === 'object' ? items : {items}\n  const repaint = typeof options.items === 'string'\n\n  return queryAll(elements).forEach((input) => {\n    const list = input.nextElementSibling\n\n    input.setAttribute(UUID, '')\n    input.setAttribute(ROLE, 'combobox')\n    input.setAttribute('autocomplete', 'off')\n    input.setAttribute('aria-autocomplete', 'list')\n\n    if (repaint) list.innerHTML = options.items\n    queryAll('a,button', list).forEach(setupItem)\n    setupExpand(input, options.open)\n    return input\n  })\n}\n\naddEvent(UUID, 'click', onClickOrFocus)\naddEvent(UUID, 'focus', onClickOrFocus)\nfunction onClickOrFocus (event) {\n  if (event.ctrlKey || event.altKey || event.metaKey || event.defaultPrevented) return\n\n  queryAll(`[${UUID}]`).forEach((input) => {\n    const list = input.nextElementSibling\n    const open = input === event.target || list.contains(event.target)\n    const item = open && event.type === 'click' && queryAll(ITEM, list).filter((item) => item.contains(event.target))[0]\n\n    if (item) onSelect(input, {relatedTarget: list, currentTarget: item})\n    else setupExpand(input, open)\n  })\n}\n\naddEvent(UUID, 'input', ({target}) => {\n  if (!target.hasAttribute(UUID)) return\n  const match = target.value.replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&') || '.^'  // From lodash\n  const regex = new RegExp(match, 'gi')\n\n  onFilter(target, {\n    relatedTarget: target.nextElementSibling,\n    render: (items) => input(target, {items}),\n    highlight: (val) => escapeHTML(val).replace(regex, '<mark>$&</mark>'),\n    escapeHTML,\n    regex\n  })\n})\n\naddEvent(UUID, 'keydown', (event) => {\n  if (event.ctrlKey || event.altKey || event.metaKey) return                    // Let browser do it's thing\n  if (event.target.hasAttribute(UUID)) return onKey(event.target, event)        // Quick check\n  for (let el = event.target, prev; el; el = el.parentElement) {                // Check if inside list\n    if ((prev = el.previousElementSibling) && prev.hasAttribute(UUID)) return onKey(prev, event)\n  }\n})\n\nfunction onKey (input, event) {\n  const list = input.nextElementSibling\n  const focus = queryAll(`${ITEM}:not([hidden])`, list)\n  const index = focus.indexOf(document.activeElement)\n  let item = false\n\n  if (event.keyCode === KEYS.END || event.keyCode === KEYS.PAGEDOWN) item = focus.pop()\n  else if (event.keyCode === KEYS.HOME || event.keyCode === KEYS.PAGEUP) item = focus[0]\n  else if (event.keyCode === KEYS.DOWN) item = focus[index + 1] || focus[0]\n  else if (event.keyCode === KEYS.UP) item = focus[index - 1] || focus.pop()\n  else if (event.keyCode !== KEYS.SHIFT && event.keyCode !== KEYS.ENTER) input.focus()\n\n  setupExpand(input, event.keyCode !== KEYS.ESC)\n  if (item !== false) event.preventDefault()  // preventDefault even if empty list\n  if (item) item.focus()\n}\n\nfunction onSelect (input, detail) {\n  if (dispatchEvent(input, 'input.select', detail)) {\n    const item = detail.currentTarget\n    input.value = item.value || item.textContent.trim()\n    input.focus()\n    setupExpand(input, false)\n  }\n}\n\nfunction onFilter (input, detail) {\n  if (dispatchEvent(input, 'input.type', detail)) {\n    queryAll(ITEM, input.nextElementSibling).reduce((acc, item) => {\n      const show = item.textContent.toLowerCase().indexOf(input.value.toLowerCase()) !== -1\n      item[show ? 'removeAttribute' : 'setAttribute']('hidden', '')\n      return show ? acc.concat(item) : acc\n    }, []).forEach(setupItem)\n  }\n}\n\nfunction setupExpand (input, open = input.getAttribute('aria-expanded') === 'true') {\n  input.nextElementSibling[open ? 'removeAttribute' : 'setAttribute']('hidden', '')\n  input.setAttribute('aria-expanded', open)\n}\n\nfunction setupItem (item, index, items) {\n  item.hasAttribute('aria-label') || item.setAttribute('aria-label', `${item.textContent.trim()}, ${index+1} av ${items.length}`)\n  item.setAttribute('tabindex', '-1')\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport coreInput from '../core-input/core-input'\nimport {exclude} from '../utils'\n\nconst DEFAULTS = {open: null, items: null, onType() {}, onFocus() {}, onSelect() {}}\n\nfunction mountInput (self) {\n  coreInput(ReactDOM.findDOMNode(self).firstElementChild)       // Input must be first child\n}\n\n// function Highlight (text, regex) {\n//   if (!query) return props.text\n//   return props.text.split(query)\n// }\n\nexport default class Input extends React.Component {\n  constructor (props) {\n    super(props)\n    this.onType = this.onType.bind(this)\n    this.state = {items: props.items, open: props.open}\n  }\n  componentDidMount () {                                        // Mount client side only to avoid rerender\n    const elem = ReactDOM.findDOMNode(this)\n    mountInput(this)\n    elem.addEventListener('input.type', this.onType)\n    elem.addEventListener('input.focus', this.props.onFocus)\n    elem.addEventListener('input.select', this.props.onSelect)\n  }\n  componentDidUpdate () { mountInput(this) }                    // Must mount also on update in case content changes\n  componentWillUnmount () {\n    elem.removeEventListener('input.type', this.onType)\n    elem.removeEventListener('input.focus', this.props.onFocus)\n    elem.removeEventListener('input.select', this.props.onSelect)\n  }\n  onType (event) {\n    const query = event.target.value\n    event.detail.render = (items) => this.setState({items, open: true}) // Allow react items\n    // event.detail.Highlight = (props) => {}\n    this.props.onType(event)\n  }\n  render () {\n    return React.createElement('div', exclude(this.props, DEFAULTS),\n      React.Children.map(this.props.children, (child, adjacent) => {\n        return adjacent ?\n          React.cloneElement(child, {'hidden': !this.state.open}, this.state.items || child.props.children) :\n          React.cloneElement(child, {'aria-expanded': String(Boolean(this.state.open))})\n      })\n    )\n  }\n}\n"],"names":["IS_BROWSER","window","IS_ANDROID","test","navigator","userAgent","IS_IOS","String","platform","addEvent","uuid","type","handler","const","useCaptureForOldFirefox","id","document","addEventListener","ariaTarget","master","relationType","targetId","getAttribute","target","getElementById","nextElementSibling","label","Error","setAttribute","getUUID","ESCAPE_MAP","&","<",">","\"","/","'","escapeHTML","str","replace","char","exclude","Object","keys","reduce","acc","key","hasOwnProperty","dispatchEvent","elem","name","detail","let","event","CustomEvent","bubbles","cancelable","createEvent","initCustomEvent","el","attr","Date","now","toString","Math","random","slice","queryAll","elements","context","nodeType","call","querySelectorAll","length","UUID","OPEN","POPS","toggle","selector","open","options","setOpen","setPops","popup","forEach","button","pops","relatedTarget","prevState","wantState","nextState","isOpen","ariaExpand","ref","contains","DEFAULTS","mountToggle","self","coreToggle","ReactDOM","findDOMNode","firstElementChild","Toggle","componentDidMount","this","componentDidUpdate","render","React","createElement","props","Children","map","children","child","adjacent","cloneElement","hidden","aria-expanded","Boolean","aria-haspopup","Component","KEYS","ENTER","SHIFT","ESC","PAGEUP","PAGEDOWN","END","HOME","UP","DOWN","ROLE","ITEM","input","items","repaint","list","innerHTML","setupItem","setupExpand","onClickOrFocus","ctrlKey","altKey","metaKey","defaultPrevented","item","filter","currentTarget","value","textContent","trim","focus","onSelect","onKey","index","indexOf","activeElement","keyCode","pop","preventDefault","hasAttribute","match","regex","RegExp","show","toLowerCase","concat","onFilter","highlight","val","prev","parentElement","previousElementSibling","onType","onFocus","mountInput","coreInput","Input","super","bind","state","componentWillUnmount","removeEventListener","setState"],"mappings":"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"}