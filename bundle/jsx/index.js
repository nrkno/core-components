!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["exports","react","react-dom"],e):e(t.CoreComponents={},t.React,t.ReactDOM)}(this,function(t,e,n){"use strict";e=e&&e.hasOwnProperty("default")?e.default:e,n=n&&n.hasOwnProperty("default")?n.default:n;var o="undefined"!=typeof window,r=o&&/(android)/i.test(navigator.userAgent),i=o&&/iPad|iPhone|iPod/.test(String(navigator.platform));function a(t,e,n){var o="blur"===e||"focus"===e,r=t+"-"+e;"undefined"==typeof window||window[r]||document.addEventListener(window[r]=e,n,o)}function u(t,e){var n=t.getAttribute("aria-controls")||t.getAttribute("aria-owns"),o=document.getElementById(n)||t.nextElementSibling,i=r?"data":"aria";if(!o)throw new Error("missing nextElementSibling on "+t.outerHTML);return e&&(t.setAttribute("aria-"+e,o.id=o.id||d()),o.setAttribute(i+"-labelledby",t.id=t.id||d())),o}var p={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","/":"&#x2F;","'":"&#x27;"};function c(t){return String(t||"").replace(/[&<>"'/]/g,function(t){return p[t]})}function s(t,e){return Object.keys(t).reduce(function(n,o){return e.hasOwnProperty(o)||(n[o]=t[o]),n},{})}function l(t,e,n){var o;return void 0===n&&(n={}),"function"==typeof window.CustomEvent?o=new window.CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n}):(o=document.createEvent("CustomEvent")).initCustomEvent(e,!0,!0,n),t.dispatchEvent(o)}function d(t,e){return Date.now().toString(36)+Math.random().toString(36).slice(2,5)}function f(t,e){return void 0===e&&(e=document),t.nodeType?[t]:"string"==typeof t?[].slice.call(e.querySelectorAll(t)):t.length?[].slice.call(t):[]}var m="data-@nrk/core-toggle-1.0.0".replace(/\W+/g,"-"),v="aria-expanded",g="aria-haspopup";function b(t,e){var n="object"==typeof e?e:{open:e},o="boolean"==typeof n.open,r="boolean"==typeof n.popup;return f(t).forEach(function(t){var e=o?n.open:"true"===t.getAttribute(v),i=r?n.popup:"true"===t.getAttribute(g);return t.setAttribute(m,""),t.setAttribute(g,i),u(t,"controls"),function(t,e){var n=u(t),o="true"===t.getAttribute("aria-expanded"),r="boolean"==typeof e?e:"toggle"===e?!o:o,i=o===r||l(t,"toggle",{relatedTarget:n,isOpen:o})?r:o;n[i?"removeAttribute":"setAttribute"]("hidden",""),t.setAttribute("aria-expanded",i)}(t,e),t})}a(m,"click",function(t){var e=t.target;f("["+m+"]").forEach(function(t){var n="true"===t.getAttribute(v),o="true"===t.getAttribute(g);t.contains(e)?b(t,!n):o&&b(t,u(t).contains(e))})});var y={open:null,popup:null};function h(t){b(n.findDOMNode(t).firstElementChild)}var E=function(t){function n(){t.apply(this,arguments)}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.prototype.componentDidMount=function(){h(this)},n.prototype.componentDidUpdate=function(){h(this)},n.prototype.render=function(){var t=this;return e.createElement("div",s(this.props,y),e.Children.map(this.props.children,function(n,o){return e.cloneElement(n,o?{hidden:!t.props.open}:{"aria-expanded":String(Boolean(t.props.open)),"aria-haspopup":String(Boolean(t.props.popup))})}))},n}(e.Component),A="data-@nrk/core-input-1.0.0".replace(/\W+/g,"-"),x={ENTER:13,SHIFT:16,ESC:27,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,UP:38,DOWN:40},C=i?"data-role":"role",S='[tabindex="-1"]';function w(t,e){var n="object"==typeof e?e:{items:e},o="string"==typeof n.items;return f(t).forEach(function(t){var e=t.nextElementSibling;return t.setAttribute(A,""),t.setAttribute(C,"combobox"),t.setAttribute("autocomplete","off"),t.setAttribute("aria-autocomplete","list"),o&&(e.innerHTML=n.items),f("a,button",e).forEach(D),k(t,n.open),t})}function T(t){t.ctrlKey||t.altKey||t.metaKey||t.defaultPrevented||f("["+A+"]").forEach(function(e){var n=e.nextElementSibling,o=e===t.target||n.contains(t.target),r=o&&"click"===t.type&&f(S,n).filter(function(e){return e.contains(t.target)})[0];r?function(t,e){if(l(t,"input.select",e)){var n=e.currentTarget;t.value=n.value||n.textContent.trim(),t.focus(),k(t,!1)}}(e,{relatedTarget:n,currentTarget:r}):k(e,o)})}function O(t,e){var n=t.nextElementSibling,o=f(S+":not([hidden])",n),r=o.indexOf(document.activeElement),i=!1;e.keyCode===x.END||e.keyCode===x.PAGEDOWN?i=o.pop():e.keyCode===x.HOME||e.keyCode===x.PAGEUP?i=o[0]:e.keyCode===x.DOWN?i=o[r+1]||o[0]:e.keyCode===x.UP?i=o[r-1]||o.pop():e.keyCode!==x.SHIFT&&e.keyCode!==x.ENTER&&t.focus(),k(t,e.keyCode!==x.ESC),!1!==i&&e.preventDefault(),i&&i.focus()}function k(t,e){void 0===e&&(e="true"===t.getAttribute("aria-expanded")),t.nextElementSibling[e?"removeAttribute":"setAttribute"]("hidden",""),t.setAttribute("aria-expanded",e)}function D(t,e,n){t.hasAttribute("aria-label")||t.setAttribute("aria-label",t.textContent.trim()+", "+(e+1)+" av "+n.length),t.setAttribute("tabindex","-1")}a(A,"click",T),a(A,"focus",T),a(A,"input",function(t){var e=t.target;if(e.hasAttribute(A)){var n=e.value.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")||".^",o=new RegExp(n,"gi");!function(t,e){l(t,"input.type",e)&&f(S,t.nextElementSibling).reduce(function(e,n){var o=-1!==n.textContent.toLowerCase().indexOf(t.value.toLowerCase());return n[o?"removeAttribute":"setAttribute"]("hidden",""),o?e.concat(n):e},[]).forEach(D)}(e,{relatedTarget:e.nextElementSibling,render:function(t){return w(e,{items:t})},highlight:function(t){return c(t).replace(o,"<mark>$&</mark>")},escapeHTML:c,regex:o})}}),a(A,"keydown",function(t){if(!(t.ctrlKey||t.altKey||t.metaKey)){if(t.target.hasAttribute(A))return O(t.target,t);for(var e=t.target,n=void 0;e;e=e.parentElement)if((n=e.previousElementSibling)&&n.hasAttribute(A))return O(n,t)}});var P={open:null,items:null,onType:function(){},onFocus:function(){},onSelect:function(){}};function M(t){w(n.findDOMNode(t).firstElementChild)}var L=function(t){function o(e){t.call(this,e),this.onType=this.onType.bind(this),this.state={items:e.items,open:e.open}}return t&&(o.__proto__=t),o.prototype=Object.create(t&&t.prototype),o.prototype.constructor=o,o.prototype.componentDidMount=function(){var t=n.findDOMNode(this);M(this),t.addEventListener("input.type",this.onType),t.addEventListener("input.focus",this.props.onFocus),t.addEventListener("input.select",this.props.onSelect)},o.prototype.componentDidUpdate=function(){M(this)},o.prototype.componentWillUnmount=function(){elem.removeEventListener("input.type",this.onType),elem.removeEventListener("input.focus",this.props.onFocus),elem.removeEventListener("input.select",this.props.onSelect)},o.prototype.onType=function(t){var e=this;t.target.value;t.detail.render=function(t){return e.setState({items:t,open:!0})},this.props.onType(t)},o.prototype.render=function(){var t=this;return e.createElement("div",s(this.props,P),e.Children.map(this.props.children,function(n,o){return o?e.cloneElement(n,{hidden:!t.state.open},t.state.items||n.props.children):e.cloneElement(n,{"aria-expanded":String(Boolean(t.state.open))})}))},o}(e.Component);t.Toggle=E,t.Input=L,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=index.js.map
