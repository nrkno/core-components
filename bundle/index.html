<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <meta name="robots" content="noindex, nofollow">
  <title>@nrk/core-components</title>
  <link rel="stylesheet" href="https://static.nrk.no/core-fonts/latest/core-fonts.min.css">
  <link rel="stylesheet" href="https://static.nrk.no/core-css/latest/core-css.min.css">
  <link rel="stylesheet" href="example.css">
</head>
<body class="docs-style">
  <ul class="docs-menu nrk-color-shade-1">
    <li><a href="#">Getting started</a></li>
    <li><a href="#toggle">Toggle</a></li>
    <li><a href="#input">Input</a></li>
    <li><a href="#dialog">Dialog</a></li>
    <li><a href="#datepicker">Datepicker</a></li>
    <li><label><input type="checkbox" checked onchange="document.body.classList.toggle('docs-style')"> Example style</label></li>
  </ul>

  <article class="docs-page">
    <h2>@nrk/core-components <!--version--></h2>
    <h3>Getting started</h3>
    <p>
      There are vast differences between screen readers, browsers and how specifications
      actually affect end users. <code class="prettyprint">core-components</code> provides easy,
      unstyled, independent and accessible components, taking away the hard work of normalizing basic interactions.
      All components are bound to version (allowing multiple instances without conflicts) and are available for both <a href="https://stackoverflow.com/questions/20435653/what-is-vanillajs" target="_blank">VanillaJS</a>
      and <a href="https://reactjs.org/" target="_blank">React</a>
      (and <a href="https://preactjs.com/" target="_blank">preact</a> with
      <a href="https://github.com/developit/preact-compat" target="_blank">preact-compat</a>).
      <small><em>Note: This is the first version of core-components -
      <a href="https://github.com/nrkno/core-components/issues/" target="_blank">feedback</a>
      and testing is welcome!</em></small>
    </p>
    <p>
      <small><strong>Note:</strong> Styling in this documentation is only for demonstration purposes.</small>
    </p>
    <details>
      <summary><h3>Use from NPM</h3> - recommended</summary>
      <h3>Shell</h3>
      <pre class="prettyprint">npm install @nrk/<strong>core-toggle</strong> --save         # Components are individually installed to achieve individual versioning</pre>
      <h3>Javascript</h3>
      <pre class="prettyprint">import coreToggle from '@nrk/<strong>core-toggle</strong>'   // Vanilla JS
import Toggle from '@nrk/<strong>core-toggle</strong>/jsx'   // ...or React/Preact compatible JSX</pre>
    </details>
    <details>
      <summary><h3>Use with Require.js</h3> - old school</summary>
      <pre class="prettyprint">&lt;script&gt;
  require(['https://static.nrk.no/core-components/X.X.X/core-components.min.js'], function(coreComponents) {
    // use coreComponents.Toggle() etc here
  });
&lt;/script&gt;</pre>
    </details>
    <details>
      <summary><h3>Use with script tag</h3> - good for prototyping, avoid in production</summary>
      <pre class="prettyprint">&lt;script src="https://static.nrk.no/core-components/X.X.X/core-components.min.js"&gt;&lt;/script&gt;
&lt;script&gt;
  // use coreComponents.Toggle() here
&lt;/script&gt;</pre>
    </details>
    <h3>Browser support</h3>
    <div class="nrk-grid docs-support">
      <div class="nrk-color-shade-1"><img alt="" src="https://cdnjs.cloudflare.com/ajax/libs/browser-logos/42.7.1/edge/edge_24x24.png"><br>IE/Edge<br>9+</div>
      <div class="nrk-color-shade-1"><img alt="" src="https://cdnjs.cloudflare.com/ajax/libs/browser-logos/42.7.1/archive/firefox_3.5-22/firefox_3.5-22_24x24.png"><br>Firefox<br>29+</div>
      <div class="nrk-color-shade-1"><img alt="" src="https://cdnjs.cloudflare.com/ajax/libs/browser-logos/42.7.1/archive/chrome_12-48/chrome_12-48_24x24.png"><br>Chrome<br>32+</div>
      <div class="nrk-color-shade-1"><img alt="" src="https://cdnjs.cloudflare.com/ajax/libs/browser-logos/42.7.1/safari/safari_24x24.png"><br>Safari<br>7.1+</div>
      <div class="nrk-color-shade-1"><img alt="" src="https://cdnjs.cloudflare.com/ajax/libs/browser-logos/42.7.1/opera/opera_24x24.png"><br>Opera<br>19+</div>
      <div class="nrk-color-shade-1"><img alt="" src="https://cdnjs.cloudflare.com/ajax/libs/browser-logos/42.7.1/archive/safari-ios_1-6/safari-ios_1-6_24x24.png"><br>iOS Safari<br>10.2+</div>
      <div class="nrk-color-shade-1"><img alt="" src="https://cdnjs.cloudflare.com/ajax/libs/browser-logos/42.7.1/android/android_24x24.png"><br>Android<br>4.4.4+</div>
    </div>
    <h3>Shortcuts</h3>
    <p>
      <a class="nrk-button" target="_top" href="https://github.com/nrkno/core-components">View on Github</a>
      <a class="nrk-button" target="_top" href="https://github.com/nrkno/core-components/releases/latest">View latest release</a>
    </p>


    <!-- =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
    <!-- Toggle -->
    <!-- =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->

    <h2 id="toggle">Toggle</h2>
    <p>
      <code class="prettyprint">core-toggle</code> simply makes a
      <code class="prettyprint">&lt;button&gt;</code> toggle the visibility of next element sibling.
      <code class="prettyprint">core-toggle</code> supports nestability, and can easily be extended with custom animations or behavior
      through the <a href="https://www.w3schools.com/jsref/event_ontoggle.asp" target="_blank">toggle event</a>.
      It has two modes:
    </p>
    <div class="nrk-grid">
      <div class="nrk-xs-12of12 nrk-md-6of12">
        <h3>Default toggle</h3>
        <p><small>
          Content is only toggled when clicking <code class="prettyprint">&lt;button&gt;</code>.
          Great for accordions and expand/collapse panels.
        </small></p>
        <button class="docs-toggle docs-button js">Example toggle</button>
        <div hidden>Content</div>
        <div id="docs-react-toggle"></div>
        <script type="text/babel">
          ReactDOM.render(<CoreComponents.Toggle>
            <button className="docs-toggle docs-button">Example toggle JSX</button>
            <div>Content</div>
          </CoreComponents.Toggle>, document.getElementById('docs-react-toggle'))
        </script>
      </div>
      <div class="nrk-xs-12of12 nrk-md-6of12">
        <h3>Popup toggle</h3>
        <p><small>
          Content is toggled when clicking <code class="prettyprint">&lt;button&gt;</code>, and
          closed when clicking outside content. Great for dropdowns and tooltips.
        </small></p>
        <button class="docs-dropdown docs-button js" aria-expanded="false">Example dropdown</button>
        <ul class="docs-drop" hidden>
          <li><a href="#">Link</a></li>
          <li>
            <button class="docs-dropdown docs-button js">Can also be nested</button>
            <ul class="docs-drop">
              <li><a href="#">Sub-link</a></li>
              <li><button>Sub-button</button></li>
            </ul>
          </li>
        </ul>
        <div id="docs-react-dropdown"></div>
        <script type="text/babel">
          ReactDOM.render(<CoreComponents.Toggle popup={true}>
            <button className="docs-dropdown docs-button">Example dropdown JSX</button>
            <ul className="docs-drop">
              <li><a href="#">Link</a></li>
              <li>
                <CoreComponents.Toggle popup={true}>
                  <button className="docs-dropdown">Can also be nested</button>
                  <ul className="docs-drop">
                    <li><a href="#">Sub-link</a></li>
                    <li><button>Sub-button</button></li>
                  </ul>
                </CoreComponents.Toggle>
              </li>
            </ul>
          </CoreComponents.Toggle>, document.getElementById('docs-react-dropdown'))
        </script>
        <button class="docs-dropdown js docs-tip docs-button" aria-expanded="false">Example tooltip</button>
        <div class="docs-drop" hidden>Some help text</div>
      </div>
    </div>
    <h3>Usage</h3><br>
    <details>
      <summary>Use with VanillaJS</summary>
        <h3>HTML &mdash; CLOSED</h3>
        <pre class="prettyprint">&lt;button&gt;Closed example&lt;button&gt; &lt;!-- Clickable element must be a &lt;button&gt;. Tip: Easily style buttons with <a href="https://static.nrk.no/core-css/latest/#utilities" target="_blank">.nrk-unset</a> --&gt;
&lt;div hidden&gt;Content&lt;/div&gt;      &lt;!-- <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/hidden" target="_blank">hidden attribute</a> is used here to avoid <a href="https://en.wikipedia.org/wiki/Flash_of_unstyled_content" target="_blank">flash of unstyled content</a> --&gt;</pre>
<h3>HTML &mdash; OPEN</h3>
<pre class="prettyprint">&lt;button aria-expanded="true"&gt;Open example&lt;button&gt;
&lt;div&gt;Content&lt;/div&gt;
</pre>
        <h3>Javascript</h3>
        <pre class="prettyprint">import coreToggle from '@nrk/core-toggle'

coreToggle(String|Element|Elements, { // Accepts a <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Selectors" target="
">selector string</a>, <a href="https://developer.mozilla.org/en-US/docs/Web/API/NodeList" target="_blank">NodeList</a>, <a href="https://developer.mozilla.org/en-US/docs/Web/API/Element" target="_blank">Element</a> or array of Elements
  open: null,                         // Defaults to value of aria-expanded or false. Use true|false to force open state
  popup: null                         // Defaults to value of aria-haspopup or false. Use true|false to force popup mode
})

// Example:
coreToggle('.my-toggle')
coreToggle('.my-dropdown', {popup: true})
</pre>
    </details>
    <details>
      <summary>Use with React/Preact</summary>
        <p>
          All <code class="prettyprint">&lt;Toggle&gt;</code> props are optional. Toggle will handle
          it's own state unless you run <code class="prettyprint">event.preventDefault()</code> in
          onToggle (no need to updated props). Non-settings props (like <code class="prettyprint">className</code>,
          <code class="prettyprint">style</code> etc.) will be applied as actual attributes.
        </p>
        <pre class="prettyprint">import Toggle from '@nrk/core-toggle/jsx'

&lt;Toggle open={false} popup={false} onToggle={function(){}}&gt;
  &lt;button&gt;Use with JSX&lt;/button&gt;  // First element must result in a &lt;button&gt;-tag. Accepts both elements and components
  &lt;div&gt;Content&lt;/div&gt;             // Next element will be toggled. Accepts both elements and components
&lt;/Toggle&gt;</pre>
    </details>
    <details>
      <summary>Events</summary>
      <p>
        Before a <code class="prettyprint">core-toggle</code> changes open state,
        a <a href="https://www.w3schools.com/jsref/event_ontoggle.asp" target="_blank">toggle event</a>
        is fired (both for VanillaJS and React/Preact components).
        The toggle event is cancelable, meaning you can use <a href="https://developer.mozilla.org/en-US/docs/Web/API/Event/preventDefault" target="_blank"><code class="prettyprint">event.preventDefault()</code></a>
        to cancel toggling. The event also <a href="https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Building_blocks/Events#Event_bubbling_and_capture" target="_blank">bubbles</a>,
        and can therefore be detected both from button element itself, or any parent element (read <a href="https://stackoverflow.com/questions/1687296/what-is-dom-event-delegation" target="_blank">event delegation</a>):
      </p>
      <pre class="prettyprint">document.addEventListener('toggle', (event) => {
  event.target                // The button element triggering toggle event
  event.detail.relatedTarget  // The content element controled by button
  event.detail.isOpen         // The current toggle state (before toggle event has run)
})</pre>
    </details>
    <details>
      <summary>Styling</summary>
      <p>
        Both the toggle button and toggle content receive attributes reflecting the current state. Example:
      </p>
      <pre class="prettyprint">
.my-example-toggle-button {}                        // Target button in any state
.my-example-toggle-button[aria-expanded="true"] {}  // Target only open button
.my-example-toggle-button[aria-expanded="false"] {} // Target only closed button

.my-example-toggle-content {}                       // Target content in any state
.my-example-toggle-content:not([hidden]) {}         // Target only open content
.my-example-toggle-content[hidden] {}               // Target only closed content
</pre>
    </details>

    <h3>FAQ</h3><br>
    <details>
      <summary>Why not use <code class="prettyprint">&lt;details&gt;</code> instead?</summary>
      <p>
        Despite having a native <a target="_blank" href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/details"><code class="prettyprint">&lt;details&gt;</code></a>
        element for expanding/collapsing content, there are several issues regarding <a target="_blank" href="https://caniuse.com/#feat=details">browser support</a>,
        <a target="_blank" href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/details#Example_with_styling">styling</a> and
        <a target="_blank" href="http://accessibleculture.org/articles/2012/03/screen-readers-and-details-summary/">accessibility</a>.
        Furthermore, polyfills often conflict with other standards such as <code class="prettyprint">&lt;dialog&gt;</code>.
      </p>
    </details>
    <details>
      <summary>Why is there no <code class="prettyprint">role="menu"</code> in dropdowns?</summary>
      <p>
        The <a href="https://www.w3.org/TR/wai-aria-practices-1.1/examples/menubar/menubar-1/menubar-1.html" target="_blank">menu role</a>
        is mainly inteded for context menues and toolbars in <a href="https://www.w3.org/TR/wai-aria-1.1/#application" target="_blank">application interfaces</a>,
        and has quite complex <a href="https://www.w3.org/TR/wai-aria-practices-1.1/examples/menubar/menubar-1/menubar-1.html#kbd_label">keyboard navigation requirements</a>.
        As most end users will not expect application behavior in websites and internal web based systems, (implemented)
        attributes like <code class="prettyprint">aria-controls</code> and <code class="prettyprint">aria-labelledby</code>
        is sufficient for a good user experience.
      </p>
    </details>
    <details>
      <summary>Why does dropdowns not open on hover?</summary>
      <p>
        Both touch devices and screen readers will have trouble properly
        interacting with hoverable interfaces (unless more complex fallback logic is implemented).
        To achieve a consistent and accessible interface, <code class="prettyprint">core-toggle</code>
        is designed around click interactions.
      </p>
    </details>
    <details>
      <summary>Why is there no group-option to achieve a single open toggle?</summary>
      <p>
        Some expand/collapse interfaces like <a href="https://www.nngroup.com/articles/accordions-complex-content/" target="_blank">accordions</a>
        behaves like a group - allowing only one expanded area at the time. This pattern however
        requires more logic and carefully designed animations to avoid confusion over expected scroll position.
      </p>
      <p>
        <small><em>Example: The user first opens "Toggle-1", and then "Toggle-2" (which closes "Toggle-1").
        Since "Toggle-1" is placed above, the position "Toggle-2" now changes -
        potentially outside the viewport on smaller devices.</em></small>
      </p>
      <p>
        <small><em>Note: If you do need to implement grouping, you can achieve this by
        closing other toggles on the <code class="prettyprint">toggle</code> event.</em></small>
      </p>
    </details>


    <!-- =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
    <!-- INPUT -->
    <!-- =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->

    <h2 id="input">Input</h2>
    <p>
      <code class="prettyprint">core-input</code> enhances
      <code class="prettyprint">&lt;input&gt;</code> fields with functionality
      for autocomplete suggesions, search results and taging abilities.
      It has three modes:
    </p>
    <div class="nrk-grid">
      <div class="nrk-xs-12of12 nrk-md-3of12">
        <h3>VanillaJS</h3><br>
        <label class="nrk-sr" for="docs-1">Write the letter C to test</label>
        <input type="text" id="docs-1" class="js docs-input docs-button" minlength="1" placeholder="Type &quot;C&quot;...">
        <ul class="docs-drop" hidden>
          <li><button value="google">Chrome</button></li>
          <li><button>Firefox</button></li>
          <li><button>Opera</button></li>
          <li><a href="https://www.apple.com/lae/safari/" target="_blank">Safari</a></li>
          <li><a href="https://www.microsoft.com/en-us/windows/microsoft-edge" target="_blank">Microsoft Edge</a></li>
        </ul>
      </div>
      <div class="nrk-xs-12of12 nrk-md-3of12">
        <h3>JSX</h3><br>
        <div id="docs-react-input"></div>
        <script type="text/babel">
          class ContainerForInput extends React.Component {
            constructor (props) {
              super(props)
              this.state = { items: [], query: '' }
              this.xhr = new XMLHttpRequest()
              this.xhr.onload = () => {
                this.setState({
                  items: JSON.parse(this.xhr.responseText).result
                    .filter((item) => item._type === 'serie')
                    .map((item) => item._source)
                })
              }
            }

            handleOnFilter = (event) => {
              const query = event.target.value

              event.preventDefault()
              this.xhr.abort()
              this.setState({
                query,
                items: query ? [{title: `Søker etter ${query}...`}] : []
              })

              if(query) {
                this.xhr.open('GET', `https://tv.nrk.no/autocomplete?query=${encodeURIComponent(query)}`, true)
                this.xhr.send()
              }
            }

            render () {
              const Input = CoreComponents.Input
              const Mark = CoreComponents.Input.Highlight
              const query = this.state.query.toLowerCase()

              return (
                <Input>
                  <input type="text" className="docs-input docs-button" />
                  <ul className="docs-drop">
                    {this.state.items.slice(0, 10).map((item, key) => <li key={key}>
                        <a href={`https://tv.nrk.no/${item.url}`}><Mark text={item.title} query={query} /></a>
                      </li>)
                    }
                    <li><button value="google">Chrome</button></li>
                    <li><button>Firefox</button></li>
                    <li><button>Opera</button></li>
                    <li><a href="https://www.apple.com/lae/safari/" target="_blank">Safari</a></li>
                    <li><a href="https://www.microsoft.com/en-us/windows/microsoft-edge" target="_blank">Microsoft Edge</a></li>
                  </ul>
                </Input>
              )
            }
          }

          ReactDOM.render(<ContainerForInput />, document.getElementById('docs-react-input'))
        </script>
      </div>
      <div aria-hidden="true" style="pointer-events:none;opacity:.3">
        <h3>Tags (work in progress)</h3><br>
        <label class="nrk-sr" for="docs-3">Write the letter C to test</label>
        <input type="text" id="docs-3" class="docs-input docs-button" disabled placeholder="Separate with comma">
      </div>
    </div>
    <h3>Usage</h3>
    <pre class="prettyprint">import input from '@nrk/core-input'</pre>


    <!-- =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
    <!-- DATEPICKER -->
    <!-- =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->

    <h2 id="datepicker">Datepicker</h2>
    <p>Work in progress</p>


    <!-- =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
    <!-- DIALOG -->
    <!-- =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->

    <h2 id="dialog">Dialog</h2>
    <p>Work in progress</p>


    <!-- =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
    <!-- Accessibility -->
    <!-- =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->

    <!--<h2 id="a11y">Accessibility</h2>
    <p>
      <em>Todo: Style and compononentify</em>
    </p>
    <div>
      <label>
        Choose a browser:
        <select>
          <option>Chrome</option>
          <option>Firefox</option>
          <option>Internet Explorer</option>
          <option>Opera</option>
          <option>Safari</option>
          <option>Microsoft Edge</option>
        </select>
      </label>
    </div>
    <div class="nrk-grid">
      <div class="nrk-xs-12of12 nrk-md-5of12" style="padding-right:15px">
        <h3>Checkbox (multiple choice)</h3><br>
        <fieldset>
          <legend>Topping</legend>
          <label><input type="checkbox" class="nrk-choice"><span>Pepperoni</span></label>
          <label><input type="checkbox" class="nrk-choice"><span>Ham</span></label>
          <label><input type="checkbox" class="nrk-choice"><span>Pineapple</span></label>
          <label><input type="checkbox" class="nrk-choice"><span>Mushroom</span></label>
        </fieldset>
      </div>
      <div class="nrk-xs-12of12 nrk-md-5of12" style="padding-right:15px">
        <h3>Radio (single choice)</h3><br>
        <fieldset>
          <legend>Coffee or tea?</legend>
          <label><input type="radio" name="drink" class="nrk-choice"><span>Coffee</span></label>
          <label><input type="radio" name="drink" class="nrk-choice"><span>Tea</span></label>
        </fieldset>
      </div>
    </div>-->


    <!-- =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
    <!-- FAQ -->
    <!-- =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->

    <!-- <h2 id="faq">FAQ</h2>
    <h3>What more components are coming?</h3>
    <p>Table</p>
    <h3>Why no select tag?</h3>
    <p>Because, mostly styling, and should be avoided anyway: https://www.youtube.com/watch?v=CUkMCQR4TpY</p>
    <h3>Why can I not just use plain progress elements?</h3>
    <p>UU. That's why.</p>
    <h3>Why not use web components?</h3>
    <p>They are <a target="_blank" href="https://hacks.mozilla.org/2015/06/the-state-of-web-components/">not mature for production usage</a> yet.</p> -->
  </article>

  <!-- JS setup -->
  <script src="https://unpkg.com/react@16/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"></script>
  <script>PropTypes = {}</script>
  <script src="https://cdn.jsdelivr.net/npm/preact/dist/preact.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/preact-compat/dist/preact-compat.min.js"></script>
  <script>React = ReactDOM = preactCompat</script>
  <script src="core-components.min.js"></script>
  <script src="jsx/index.js"></script>>
  <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
  <script src="example.js"></script>

  <!-- RequireJS setup -->
  <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.5/require.js"></script>
  <script>
    requirejs(['core-components.min.js'], function (coreComponents) {
      coreComponents.toggle('.js.docs-toggle') // Testing multiple initializtions
    })
  </script> -->

  <!-- Docs setup -->
  <script async src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js"></script>
  <script async src="https://static.nrk.no/core-icons/2.4.1/core-icons.min.js"></script>
</body>
</html>
