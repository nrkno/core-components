{"version":3,"file":"core-components.min.js","sources":["../packages/utils.js","../packages/core-toggle/core-toggle.js","../packages/core-input/core-input.js","../packages/core-datepicker/node_modules/polyfill-custom-event/index.js","../packages/core-datepicker/core-datepicker.js","../packages/core-toggle/core-toggle.jsx","../packages/core-datepicker/core-datepicker.jsx","../packages/core-input/core-input.jsx"],"sourcesContent":["/**\n* addElements\n* @param {String} key\n* @param {String|NodeList|Array|Element} elements A CSS selector string, nodeList, element array, or single element\n* @return {Array} Array of elements\n*/\nexport function addElements (key, elements) {\n  if (typeof elements === 'string') return addElements(key, document.querySelectorAll(elements))\n  if (elements.length) return [].map.call(elements, (el) => (el[key] = 1) && el)\n  if (elements.nodeType) return (elements[key] = 1) && [elements]\n  return []\n}\n\n/**\n* addEvent\n* @param {String} key A namespace to ensure no double binding and only triggering on registered elements\n* @param {String} eventName A case-sensitive string representing the event type to listen for\n* @param {Function} listener The function which receives a notification\n*/\nexport function addEvent (key, eventName, listener) {\n  if (typeof window === 'undefined') return\n\n  // Store on window to make sure multiple instances is merged\n  const namespace = window[key] = window[key] || {}\n  const isUnbound = !namespace[eventName] && (namespace[eventName] = 1)\n\n  if (isUnbound) {\n    document.addEventListener(eventName, function (event) {\n      for (let el = event.target; el; el = el.parentElement) {\n        if (el[key]) listener(el, event)\n      }\n    }, true) // Use capture to make sure focus/blur bubbles in old Firefox\n  }\n}\n\n/**\n* assign\n* @param {Object} target The target object\n* @param {Object} sources The source object(s)\n* @return {Object} The target object\n*/\nexport function assign (target, ...sources) {\n  sources.filter(Boolean).forEach((source) => {\n    Object.keys(source).forEach((key) => (target[key] = source[key]))\n  })\n  return target\n}\n\n/**\n* CustomEvent\n* See {@link https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent}\n* @param {String} eventName A case-sensitive string representing the event type to create\n* @param {Object} params.detail Any data passed when initializing the event\n* @param {Boolean} params.cancelable A Boolean indicating whether the event is cancelable.\n* @param {Boolean} params.bubbles A Boolean indicating whether the event bubbles up through the DOM or not.\n* @return {CustomEvent} Creates a CustomEvent.\n*/\nexport const CustomEvent = (() => {\n  if (typeof window === 'undefined') return\n  if (window.CustomEvent) return window.CustomEvent\n\n  function CustomEvent (event, params = {}) {\n    const evt = document.createEvent('CustomEvent')\n    evt.initCustomEvent(event, Boolean(params.bubbles), Boolean(params.cancelable), params.detail)\n    return evt\n  }\n\n  CustomEvent.prototype = window.Event.prototype\n  return CustomEvent\n})()\n\n/**\n* debounce\n* @param {Function} callback The function to debounce\n* @param {Number} ms The number of milliseconds to delay\n* @return {Function} The new debounced function\n*/\nexport function debounce (callback, ms) {\n  let timer\n  return function (...args) {\n    const self = this\n    clearTimeout(timer)\n    timer = setTimeout(() => callback.apply(self, args), ms)\n  }\n}\n\n/**\n* escapeHTML\n* @param {String} str A string with potential html tokens\n* @return {String} Escaped HTML string according to OWASP recommendation\n*/\nconst ESCAPE_HTML_MAP = {'&': '&amp;', '<': '&lt;', '>': '&gt;', '\"': '&quot;', '/': '&#x2F;', '\\'': '&#x27;'}\nexport function escapeHTML (str) {\n  return String(str || '').replace(/[&<>\"'/]/g, (char) => ESCAPE_HTML_MAP[char])\n}\n","import {name, version} from './package.json'\nimport {addElements, addEvent, CustomEvent} from '../utils'\n\nconst KEY = `${name}-${version}`                    // Unique id of component\nconst ATTR = 'aria-expanded'\n\nexport function toggle (elems, open = null) {       // Toggle component\n  return addElements(KEY, elems).map((el) => {\n    const isExpand = el.getAttribute(ATTR) === 'true'\n    const doExpand = open === null ? isExpand : Boolean(open)\n    const canSetup = isExpand === doExpand || el.dispatchEvent(new CustomEvent('toggle', {\n      bubbles: true,\n      cancelable: true\n    }))\n\n    if (canSetup) el.setAttribute(ATTR, doExpand)\n    return el\n  })\n}\n\naddEvent(KEY, 'click', (el) => {\n  toggle(el, el.getAttribute(ATTR) === 'false')\n})\n","import {name, version} from './package.json'\nimport {addElements, addEvent} from '../utils'\n\nconst KEY = `${name}-${version}`  // Unique id of component\nlet ARIA_OWNS_ID = 0              // Used for generating aria-owns ids\nlet ARIA_LIVE_EL                  // Element to contain screen reader text\n\n\n/*addElements(KEY, element)\naddEvent(KEY, 'mouseenter', (event) => {\n  event.target\n});\n\naddEvent(KEY, 'keydown', (event) => {\n  const openDialog = [];\n  const closeEvent = new CustomEvent('dialog.close', {bubbles: true, cancelable: true})\n  const shouldClose = openDialog.dispatchEvent(closeEvent);\n});\n\ndocument.addEventListener('dialog.close', (event) => {\n  event.target\n});\n\nStore()*/\n\nconst OPTIONS = {\n  items: 10,\n  onHits: () => {},\n  sort: (itemA, itemB) => 0,\n  item: (item, input) => (item.label || item.value).replace(input.regex, '<b>' + input.query + '</b>'),\n  filter: (item, input) => item.value.indexOf(input.query) !== -1,\n  value: (item) => ({value: item.value, label: 'Hei'}),\n  list: (query) => {\n    return ['gmail.com', 'hotmail.com'].map((provider) => {\n      return `${query}@${provider}`\n    })\n  }\n}\n\n// var regex = new RegExp(input.query.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, '\\\\$&'), 'gi')\n\n/*const input = new coreComponents.Input(element)\ninput.evaluate()\ninput.focus()\ninput.focusLine(3)\ninput.show()\ninput.hide()\n\ndocument.addEventListener('input.hits', (event) => {\n  event.target = coreInput\n  event.detail = {store}\n  ?.goToNextHit()\n})*/\n\nexport function input (...args) {\n  return new Input(...args)\n}\n\nclass Input {\n  constructor (elements, options = {}) {\n    this.elements = getElements(elements)\n    this.elements.forEach((el) => {\n      const mode = options.complete || el.getAttribute('aria-autocomplete') || 'both'\n      const owns = options.owns || el.getAttribute('aria-owns') || `${KEY}-${ARIA_OWNS_ID++}`\n\n      el.setAttribute('role', 'combobox')\n      el.setAttribute('autocomplete', false)\n      el.setAttribute('aria-expanded', false)\n      el.setAttribute('aria-autocomplete', mode) // both = suggest, list = hits\n      el.setAttribute('aria-owns', owns)\n\n      if (!getList(el)) { // TODO what about <dataset>\n        const list = document.createElement('ul')\n        list.id = owns\n        list.className = 'nrk-dropdown'\n        el.insertAdjacentElement('afterend', list)\n      }\n\n      el[KEY] = [].map.call(getList(el).children, (el) => el.innerHTML)\n      getList(el).setAttribute('hidden', '')\n      getList(el).setAttribute('role', 'listbox')\n    })\n  }\n  value () {\n\n  }\n  show () {\n    ARIA_LIVE_EL.setAttribute('aria-hidden', false)\n    this.elements.forEach((el) => {\n      el.setAttribute('aria-expanded', true)\n      getList(el).removeAttribute('hidden')\n      getList(el).style.width = `${el.offsetWidth}px`\n    })\n    return this\n  }\n  hide () {\n    ARIA_LIVE_EL.setAttribute('aria-hidden', true)\n    this.elements.forEach((el) => {\n      el.setAttribute('aria-expanded', false)\n      getList(el).setAttribute('hidden', '')\n    })\n    return this\n  }\n}\n\nfunction getList (el) {\n  return document.getElementById(el.getAttribute('aria-owns'))\n}\n\nfunction render (el) {\n  const value = el.value.trim().toLowerCase()\n  const index = 0\n  const list = getList(el)\n  // const hits = [].map.call(list.children, (el) => el.textContent).filter((item) => item.toLowerCase().indexOf(value) !== -1)\n  // console.log(value, list, hits)\n\n  ARIA_LIVE_EL.setAttribute('aria-hidden', false)\n  ARIA_LIVE_EL.textContent = `${hits.length} treff`\n\n  el.setAttribute('aria-expanded', true) // should be false if no hits?\n  // el.setAttribute('aria-activedescendant')\n  list.removeAttribute('hidden')\n  list.style.width = `${el.offsetWidth}px`\n  list.innerHTML = hits.map(({value}, i) => `<li role=\"option\" aria-selected=\"${i === index}\">${value}</li>`).join('')\n}\n\nfunction onKey (el, event) {\n  if (event.keyCode === 27) input(el).hide()\n  if (event.keyCode === 38 || event.keyCode === 40) {\n    event.preventDefault()\n    const items = [].slice.call(getList(el).children)\n    const selected = items.filter((el) => el.getAttribute('aria-selected') === 'true')[0]\n    const index = (items.indexOf(selected) + (event.keyCode === 38 ? -1 : 1)) % items.length\n    const mode = el.getAttribute('aria-autocomplete')\n    const value = (items[index] || el).value\n    console.log(index, value)\n\n    render(el)\n\n    if (mode === 'list') LIVE.textContent = value || 'Tomt tekstfelt'\n    else el.value = value\n  }\n}\n\nif (typeof document !== 'undefined') {\n  ARIA_LIVE_EL = document.createElement('span')\n  ARIA_LIVE_EL.setAttribute('aria-hidden', true)\n  ARIA_LIVE_EL.setAttribute('aria-live', 'assertive')\n  document.documentElement.appendChild(ARIA_LIVE_EL)\n}\n\naddEvent(KEY, 'keydown', onKey)\naddEvent(KEY, 'focus', render)\naddEvent(KEY, 'input', render)\naddEvent(KEY, 'blur', (el) => input(el).hide())\n","let polyfilled = false;\n\nif(typeof window !==\"undefined\" && typeof window.CustomEvent !== \"function\") {\n\n\tfunction CustomEvent ( event, params = { bubbles: false, cancelable: false, detail: undefined } ) {\n    \tvar evt = document.createEvent( 'CustomEvent' );\n    \tevt.initCustomEvent( event, params.bubbles, params.cancelable, params.detail );\n    \treturn evt;\n\t}\n\n\tCustomEvent.prototype = window.Event.prototype;\n\n\twindow.CustomEvent = CustomEvent;\n\n\tpolyfilled = true;\n\n};\n\nexport default polyfilled;\n","import {name, version} from './package.json'\nimport {addElements, addEvent} from '../utils'\nimport 'polyfill-custom-event'\n\nconst KEY = `${name}-${version}`                    // Unique id of component\n\nexport function datepicker (...args) {              // Expose component\n  return new Datepicker(...args)\n}\n\nclass Datepicker {\n  constructor (elements) {\n    this.elements = addElements(elements, KEY)\n    // tabindex=\"0\" på datepicker kun lytte til events på disse\n  }\n  open (open = true) {}\n  close (open = false) {}\n}\n\n\n/* <table>\n  <caption></caption>\n  <thead></thead>\n  <tbody></tbody>\n  <tfoot></tfoot>\n</table> */\n","import React from 'react'\nimport {assign} from '../utils'\n\nexport class Toggle extends React.PureComponent {\n  constructor(props) {\n    super(props)\n    this.toggle = this.toggle.bind(this)\n    this.state = {open: this.props.open !== 'false' && Boolean(this.props.open)}\n  }\n  toggle() {\n    this.setState((prevState, props) => ({open: !prevState.open}))\n  }\n  render() {\n    const attr = assign({\n      'aria-expanded': this.state.open,\n      'onClick': this.toggle\n    }, this.props)\n\n    return <button {...attr} />\n  }\n}\n","export function Datepicker () {}\n","export function Input () {\n  return <div>Testing input</div>\n}\n"],"names":["addElements","key","elements","document","querySelectorAll","length","map","call","el","nodeType","addEvent","eventName","listener","window","const","namespace","addEventListener","event","let","target","parentElement","toggle","elems","open","KEY","isExpand","getAttribute","ATTR","doExpand","Boolean","dispatchEvent","CustomEvent","bubbles","cancelable","setAttribute","input","Input","args","getList","getElementById","render","value","trim","toLowerCase","list","ARIA_LIVE_EL","textContent","hits","removeAttribute","style","width","innerHTML","ref","i","join","params","evt","createEvent","initCustomEvent","detail","prototype","Event","undefined","Datepicker","this","name","close","Toggle","props","super","bind","state","setState","prevState","attr","sources","filter","forEach","source","Object","keys","assign","aria-expanded","onClick","React","PureComponent","ARIA_OWNS_ID","options","getElements","mode","complete","owns","createElement","id","className","insertAdjacentElement","children","show","hide","documentElement","appendChild","keyCode","preventDefault","items","slice","selected","index","indexOf","console","log","LIVE"],"mappings":"oOAMA,SAAgBA,EAAaC,EAAKC,GAChC,MAAwB,iBAAbA,EAA8BF,EAAYC,EAAKE,SAASC,iBAAiBF,IAChFA,EAASG,UAAkBC,IAAIC,KAAKL,WAAWM,UAAQA,EAAGP,GAAO,IAAMO,IACvEN,EAASO,UAAkBP,EAASD,GAAO,KAAOC,MAUxD,SAAgBQ,EAAUT,EAAKU,EAAWC,GACxC,GAAsB,oBAAXC,OAAX,CAGAC,IAAMC,EAAYF,OAAOZ,GAAOY,OAAOZ,QACpBc,EAAUJ,KAAeI,EAAUJ,GAAa,IAGjER,SAASa,iBAAiBL,EAAW,SAAUM,GAC7C,IAAKC,IAAIV,EAAKS,EAAME,OAAQX,EAAIA,EAAKA,EAAGY,cAClCZ,EAAGP,IAAMW,EAASJ,EAAIS,KAE3B,ICzBP,SAAgBI,EAAQC,EAAOC,GAC7B,sBADoC,MAC7BvB,EAAYwB,EAAKF,GAAOhB,aAAKE,GAClCM,IAAMW,EAAqC,SAA1BjB,EAAGkB,aAAaC,GAC3BC,EAAoB,OAATL,EAAgBE,EAAWI,QAAQN,GAOpD,OANiBE,IAAaG,GAAYpB,EAAGsB,cAAc,IAAIC,EAAY,UACzEC,SAAS,EACTC,YAAY,OAGAzB,EAAG0B,aAAaP,EAAMC,GAC7BpB,ICsCX,SAAgB2B,2DACd,OAAO,kCAAIC,gBAASC,KAkDtB,SAASC,EAAS9B,GAChB,OAAOL,SAASoC,eAAe/B,EAAGkB,aAAa,cAGjD,SAASc,EAAQhC,GACDA,EAAGiC,MAAMC,OAAOC,cAA9B7B,IAEM8B,EAAON,EAAQ9B,GAIrBqC,EAAaX,aAAa,eAAe,GACzCW,EAAaC,YAAiBC,qBAE9BvC,EAAG0B,aAAa,iBAAiB,GAEjCU,EAAKI,gBAAgB,UACrBJ,EAAKK,MAAMC,MAAW1C,mBACtBoC,EAAKO,UAAYJ,KAAKzC,aAAK8C,EAASC,8CAZtB,IAYgEA,0BAA8BC,KAAK,qDFlEtGvB,EAAc,WAIzB,SAASA,EAAad,EAAOsC,sBAC3BzC,IAAM0C,EAAMrD,SAASsD,YAAY,eAEjC,OADAD,EAAIE,gBAAgBzC,EAAOY,QAAQ0B,EAAOvB,SAAUH,QAAQ0B,EAAOtB,YAAasB,EAAOI,QAChFH,EANT,GAAsB,oBAAX3C,OACX,OAAIA,OAAOkB,YAAoBlB,OAAOkB,aAQtCA,EAAY6B,UAAY/C,OAAOgD,MAAMD,UAC9B7B,GAXkB,GGvD3B,GAAoB,oBAAVlB,QAAuD,mBAAvBA,OAAOkB,YAA4B,CAE5E,SAASA,EAAcd,EAAOsC,mBAAWvB,SAAS,EAAOC,YAAY,EAAO0B,YAAQG,IAChF,IAAIN,EAAMrD,SAASsD,YAAa,eAEhC,OADAD,EAAIE,gBAAiBzC,EAAOsC,EAAOvB,QAASuB,EAAOtB,WAAYsB,EAAOI,QAC/DH,EAGXzB,EAAY6B,UAAY/C,OAAOgD,MAAMD,UAErC/C,OAAOkB,YAAcA,ECRtBjB,IAMMiD,EACJ,SAAa7D,GACb8D,KAAO9D,SAAWF,EAAYE,EARpB+D,+BAWZF,YAAExC,cAAMA,mBAAO,IACfwC,YAAEG,eAAO3C,mBAAO,QHbVC,EAAMyC,yBACNtC,EAAO,gBAgBbjB,EAASc,EAAK,iBAAUhB,GACtBa,EAAOb,EAA8B,UAA1BA,EAAGkB,aAAaC,MIlBtB,IHEHkB,EGFSsB,cACX,WAAYC,GACVC,YAAMD,GACNJ,KAAK3C,OAAS2C,KAAK3C,OAAOiD,KAAKN,MAC/BA,KAAKO,OAAShD,KAA0B,UAApByC,KAAKI,MAAM7C,MAAoBM,QAAQmC,KAAKI,MAAM7C,iHAExEF,kBACE2C,KAAKQ,kBAAUC,EAAWL,UAAY7C,MAAOkD,EAAUlD,qBAEzDiB,kBACE1B,IAAM4D,EL4BV,SAAwBvD,iEAItB,OAHAwD,EAAQC,OAAO/C,SAASgD,iBAASC,GAC/BC,OAAOC,KAAKF,GAAQD,iBAAS5E,UAASkB,EAAOlB,GAAO6E,EAAO7E,OAEtDkB,EKhCQ8D,EACXC,gBAAiBlB,KAAKO,MAAMhD,KAC5B4D,QAAWnB,KAAK3C,QACf2C,KAAKI,OAER,OAAOgB,yBAAQV,OAfSU,EAAMC,eHA5B7D,EAAMyC,wBACRqB,EAAe,EAsDblD,EACJ,SAAalC,EAAUqF,sBACvBvB,KAAO9D,SAAWsF,YAAYtF,GAC9B8D,KAAO9D,SAAS2E,iBAASrE,GACvB,IAAQiF,EAAOF,EAAQG,UAAYlF,EAAGkB,aAAa,sBAAwB,OACnEiE,EAAOJ,EAAQI,MAAQnF,EAAGkB,aAAa,cAAmBF,MAAO8D,IAQzE,GANA9E,EAAK0B,aAAa,OAAQ,YAC1B1B,EAAK0B,aAAa,gBAAgB,GAClC1B,EAAK0B,aAAa,iBAAiB,GACnC1B,EAAK0B,aAAa,oBAAqBuD,GACvCjF,EAAK0B,aAAa,YAAayD,IAExBrD,EAAQ9B,GAAK,CAClB,IAAQoC,EAAOzC,SAASyF,cAAc,MACtChD,EAAOiD,GAAKF,EACZ/C,EAAOkD,UAAY,eACnBtF,EAAKuF,sBAAsB,WAAYnD,GAGzCpC,EAAKgB,MAAUlB,IAAIC,KAAK+B,EAAQ9B,GAAIwF,kBAAWxF,UAAOA,EAAG2C,YACzDb,EAAU9B,GAAI0B,aAAa,SAAU,IACrCI,EAAU9B,GAAI0B,aAAa,OAAQ,cAGvCE,YAAEK,mBAGFL,YAAE6D,gBAOA,OANApD,EAAeX,aAAa,eAAe,GAC3C8B,KAAO9D,SAAS2E,iBAASrE,GACvBA,EAAK0B,aAAa,iBAAiB,GACnCI,EAAU9B,GAAIwC,gBAAgB,UAC9BV,EAAU9B,GAAIyC,MAAMC,MAAW1C,qBAExBwD,MAEX5B,YAAE8D,gBAMA,OALArD,EAAeX,aAAa,eAAe,GAC3C8B,KAAO9D,SAAS2E,iBAASrE,GACvBA,EAAK0B,aAAa,iBAAiB,GACnCI,EAAU9B,GAAI0B,aAAa,SAAU,MAE9B8B,MA2Ca,oBAAb7D,YACT0C,EAAe1C,SAASyF,cAAc,SACzB1D,aAAa,eAAe,GACzCW,EAAaX,aAAa,YAAa,aACvC/B,SAASgG,gBAAgBC,YAAYvD,IAGvCnC,EAASc,EAAK,UAzBd,SAAgBhB,EAAIS,GAElB,GADsB,KAAlBA,EAAMoF,SAAgBlE,EAAM3B,GAAI0F,OACd,KAAlBjF,EAAMoF,SAAoC,KAAlBpF,EAAMoF,QAAgB,CAChDpF,EAAMqF,iBACNxF,IAAMyF,KAAWC,MAAMjG,KAAK+B,EAAQ9B,GAAIwF,UAClCS,EAAWF,EAAM3B,gBAAQpE,SAA4C,SAArCA,EAAGkB,aAAa,mBAA6B,GAC7EgF,GAASH,EAAMI,QAAQF,IAA+B,KAAlBxF,EAAMoF,SAAkB,EAAI,IAAME,EAAMlG,OAC5EoF,EAAOjF,EAAGkB,aAAa,qBACvBe,GAAS8D,EAAMG,IAAUlG,GAAIiC,MACnCmE,QAAQC,IAAIH,EAAOjE,GAEnBD,EAAOhC,GAEM,SAATiF,EAAiBqB,KAAKhE,YAAcL,GAAS,iBAC5CjC,EAAGiC,MAAQA,KAYpB/B,EAASc,EAAK,QAASgB,GACvB9B,EAASc,EAAK,QAASgB,GACvB9B,EAASc,EAAK,gBAAShB,UAAO2B,EAAM3B,GAAI0F,wCEpJxC,kEACE,OAAO,kCAAInC,gBAAc1B,mBEPpB,qDCAA,WACL,OAAO+C,+BAAK"}