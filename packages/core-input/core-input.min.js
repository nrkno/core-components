!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.coreInput=t()}(this,function(){"use strict";var e="undefined"!=typeof window,t=(e&&/(android)/i.test(navigator.userAgent),e&&/iPad|iPhone|iPod/.test(String(navigator.platform)));function n(e,t,n){var r="blur"===t||"focus"===t,i=e+"-"+t;"undefined"==typeof window||window[i]||document.addEventListener(window[i]=t,n,r)}var r={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","/":"&#x2F;","'":"&#x27;"};function i(e){return String(e||"").replace(/[&<>"'/]/g,function(e){return r[e]})}function o(e,t,n){var r;return void 0===n&&(n={}),"function"==typeof window.CustomEvent?r=new window.CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n}):(r=document.createEvent("CustomEvent")).initCustomEvent(t,!0,!0,n),e.dispatchEvent(r)}function a(e,t){return void 0===t&&(t=document),e.nodeType?[e]:"string"==typeof e?[].slice.call(t.querySelectorAll(e)):e.length?[].slice.call(e):[]}var u="data-@nrk/core-input-1.0.0".replace(/\W+/g,"-"),c={ENTER:13,SHIFT:16,ESC:27,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,UP:38,DOWN:40},d=t?"data-role":"role",l='[tabindex="-1"]';function f(e,t){var n="object"==typeof t?t:{items:t},r="string"==typeof n.items;return a(e).forEach(function(e){var t=e.nextElementSibling;return e.setAttribute(u,""),e.setAttribute(d,"combobox"),e.setAttribute("autocomplete","off"),e.setAttribute("aria-autocomplete","list"),r&&(t.innerHTML=n.items),a("a,button",t).forEach(b),v(e,n.open),e})}function s(e){e.ctrlKey||e.altKey||e.metaKey||e.defaultPrevented||a("["+u+"]").forEach(function(t){var n=t.nextElementSibling,r=t===e.target||n.contains(e.target),i=r&&"click"===e.type&&a(l,n).filter(function(t){return t.contains(e.target)})[0];i?function(e,t){if(o(e,"input.select",t)){var n=t.currentTarget;e.value=n.value||n.textContent.trim(),e.focus(),v(e,!1)}}(t,{relatedTarget:n,currentTarget:i}):v(t,r)})}function p(e,t){var n=e.nextElementSibling,r=a(l+":not([hidden])",n),i=r.indexOf(document.activeElement),o=!1;t.keyCode===c.END||t.keyCode===c.PAGEDOWN?o=r.pop():t.keyCode===c.HOME||t.keyCode===c.PAGEUP?o=r[0]:t.keyCode===c.DOWN?o=r[i+1]||r[0]:t.keyCode===c.UP?o=r[i-1]||r.pop():t.keyCode!==c.SHIFT&&t.keyCode!==c.ENTER&&e.focus(),v(e,t.keyCode!==c.ESC),!1!==o&&t.preventDefault(),o&&o.focus()}function v(e,t){void 0===t&&(t="true"===e.getAttribute("aria-expanded")),e.nextElementSibling[t?"removeAttribute":"setAttribute"]("hidden",""),e.setAttribute("aria-expanded",t)}function b(e,t,n){e.hasAttribute("aria-label")||e.setAttribute("aria-label",e.textContent.trim()+", "+(t+1)+" av "+n.length),e.setAttribute("tabindex","-1")}return n(u,"click",s),n(u,"focus",s),n(u,"input",function(e){var t=e.target;if(t.hasAttribute(u)){var n=t.value.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")||".^",r=new RegExp(n,"gi");!function(e,t){o(e,"input.type",t)&&a(l,e.nextElementSibling).reduce(function(t,n){var r=-1!==n.textContent.toLowerCase().indexOf(e.value.toLowerCase());return n[r?"removeAttribute":"setAttribute"]("hidden",""),r?t.concat(n):t},[]).forEach(b)}(t,{relatedTarget:t.nextElementSibling,render:function(e){return f(t,{items:e})},highlight:function(e){return i(e).replace(r,"<mark>$&</mark>")},escapeHTML:i,regex:r})}}),n(u,"keydown",function(e){if(!(e.ctrlKey||e.altKey||e.metaKey)){if(e.target.hasAttribute(u))return p(e.target,e);for(var t=e.target,n=void 0;t;t=t.parentElement)if((n=t.previousElementSibling)&&n.hasAttribute(u))return p(n,e)}}),f});
//# sourceMappingURL=core-input.min.js.map
