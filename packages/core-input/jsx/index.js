!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["react","react-dom"],t):e.CoreInput=t(e.React,e.ReactDOM)}(this,function(e,t){"use strict";e=e&&e.hasOwnProperty("default")?e.default:e,t=t&&t.hasOwnProperty("default")?t.default:t;var n="undefined"!=typeof window,o=(n&&/(android)/i.test(navigator.userAgent),n&&/iPad|iPhone|iPod/.test(String(navigator.platform)));function r(e,t,n){var o="blur"===t||"focus"===t,r=e+"-"+t;"undefined"==typeof window||window[r]||document.addEventListener(window[r]=t,n,o)}var i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","/":"&#x2F;","'":"&#x27;"};function u(e){return String(e||"").replace(/[&<>"'/]/g,function(e){return i[e]})}function a(e,t,n){var o;return void 0===n&&(n={}),"function"==typeof window.CustomEvent?o=new window.CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n}):(o=document.createEvent("CustomEvent")).initCustomEvent(t,!0,!0,n),e.dispatchEvent(o)}function c(e,t){return void 0===t&&(t=document),e.nodeType?[e]:"string"==typeof e?[].slice.call(t.querySelectorAll(e)):e.length?[].slice.call(e):[]}var s="data-@nrk/core-input-1.0.0".replace(/\W+/g,"-"),p={ENTER:13,SHIFT:16,ESC:27,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,UP:38,DOWN:40},d=o?"data-role":"role",l='[tabindex="-1"]';function f(e,t){var n="object"==typeof t?t:{items:t},o="string"==typeof n.items;return c(e).forEach(function(e){var t=e.nextElementSibling;return e.setAttribute(s,""),e.setAttribute(d,"combobox"),e.setAttribute("autocomplete","off"),e.setAttribute("aria-autocomplete","list"),o&&(t.innerHTML=n.items),c("a,button",t).forEach(h),y(e,n.open),e})}function m(e){e.ctrlKey||e.altKey||e.metaKey||e.defaultPrevented||c("["+s+"]").forEach(function(t){var n=t.nextElementSibling,o=t===e.target||n.contains(e.target),r=o&&"click"===e.type&&c(l,n).filter(function(t){return t.contains(e.target)})[0];r?function(e,t){if(a(e,"input.select",t)){var n=t.currentTarget;e.value=n.value||n.textContent.trim(),e.focus(),y(e,!1)}}(t,{relatedTarget:n,currentTarget:r}):y(t,o)})}function v(e,t){var n=e.nextElementSibling,o=c(l+":not([hidden])",n),r=o.indexOf(document.activeElement),i=!1;t.keyCode===p.END||t.keyCode===p.PAGEDOWN?i=o.pop():t.keyCode===p.HOME||t.keyCode===p.PAGEUP?i=o[0]:t.keyCode===p.DOWN?i=o[r+1]||o[0]:t.keyCode===p.UP?i=o[r-1]||o.pop():t.keyCode!==p.SHIFT&&t.keyCode!==p.ENTER&&e.focus(),y(e,t.keyCode!==p.ESC),!1!==i&&t.preventDefault(),i&&i.focus()}function y(e,t){void 0===t&&(t="true"===e.getAttribute("aria-expanded")),e.nextElementSibling[t?"removeAttribute":"setAttribute"]("hidden",""),e.setAttribute("aria-expanded",t)}function h(e,t,n){e.hasAttribute("aria-label")||e.setAttribute("aria-label",e.textContent.trim()+", "+(t+1)+" av "+n.length),e.setAttribute("tabindex","-1")}r(s,"click",m),r(s,"focus",m),r(s,"input",function(e){var t=e.target;if(t.hasAttribute(s)){var n=t.value.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")||".^",o=new RegExp(n,"gi");!function(e,t){a(e,"input.type",t)&&c(l,e.nextElementSibling).reduce(function(t,n){var o=-1!==n.textContent.toLowerCase().indexOf(e.value.toLowerCase());return n[o?"removeAttribute":"setAttribute"]("hidden",""),o?t.concat(n):t},[]).forEach(h)}(t,{relatedTarget:t.nextElementSibling,render:function(e){return f(t,{items:e})},highlight:function(e){return u(e).replace(o,"<mark>$&</mark>")},escapeHTML:u,regex:o})}}),r(s,"keydown",function(e){if(!(e.ctrlKey||e.altKey||e.metaKey)){if(e.target.hasAttribute(s))return v(e.target,e);for(var t=e.target,n=void 0;t;t=t.parentElement)if((n=t.previousElementSibling)&&n.hasAttribute(s))return v(n,e)}});var E={open:null,items:null,onType:function(){},onFocus:function(){},onSelect:function(){}};function b(e){f(t.findDOMNode(e).firstElementChild)}return function(n){function o(e){n.call(this,e),this.onType=this.onType.bind(this),this.state={items:e.items,open:e.open}}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype.componentDidMount=function(){var e=t.findDOMNode(this);b(this),e.addEventListener("input.type",this.onType),e.addEventListener("input.focus",this.props.onFocus),e.addEventListener("input.select",this.props.onSelect)},o.prototype.componentDidUpdate=function(){b(this)},o.prototype.componentWillUnmount=function(){elem.removeEventListener("input.type",this.onType),elem.removeEventListener("input.focus",this.props.onFocus),elem.removeEventListener("input.select",this.props.onSelect)},o.prototype.onType=function(e){var t=this;e.target.value;e.detail.render=function(e){return t.setState({items:e,open:!0})},this.props.onType(e)},o.prototype.render=function(){var t=this;return e.createElement("div",function(e,t){return Object.keys(e).reduce(function(n,o){return t.hasOwnProperty(o)||(n[o]=e[o]),n},{})}(this.props,E),e.Children.map(this.props.children,function(n,o){return o?e.cloneElement(n,{hidden:!t.state.open},t.state.items||n.props.children):e.cloneElement(n,{"aria-expanded":String(Boolean(t.state.open))})}))},o}(e.Component)});
//# sourceMappingURL=index.js.map
